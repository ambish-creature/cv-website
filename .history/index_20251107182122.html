<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Toto Wang · Computer Science</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Top Nav -->
  <header class="topnav">
    <div class="container nav-inner">
      <a class="brand" href="index.html">Toto<span>Wang</span></a>
      <nav class="nav-links">
        <a href="#about">About</a>
        <a href="#projects">Projects</a>
        <a href="#blog">Blog</a>
        <a href="#contact">Contact</a>
        <a class="btn small" href="personal-photos.html">Personal Photos</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero hero-split parallax" id="top">
    <div class="container hero-grid">
      <div class="hero-copy">
        <h1>Building useful things with code.</h1>
        <p class="subtitle">CS @ University of Manchester (G400). Interests: systems, compilers, and clean UI engineering.</p>
        <div class="cta">
          <a class="btn" href="#projects">View Projects</a>
          <a class="btn btn-secondary" href="mailto:youremail@example.com">Contact Me</a>
        </div>
        <div class="meta-row">
          <span>• Manchester, UK</span>
          <span>• Open to internships 2026</span>
        </div>
      </div>
      <div class="hero-media">
        <img src="images/hero-illustration.png" alt="Tech illustration" />
      </div>
    </div>
    <div class="scroll-cue">Scroll</div>
  </section>

  <!-- Features -->
  <section class="section">
    <div class="container">
      <div class="feature-grid">
        <article class="feature card reveal">
          <h3>Efficient</h3>
          <p>Focus on lean, readable code and measurable performance.</p>
        </article>
        <article class="feature card reveal">
          <h3>Reliable</h3>
          <p>Tests, CI, and code reviews to keep things solid.</p>
        </article>
        <article class="feature card reveal">
          <h3>Usable</h3>
          <p>Thoughtful UI/UX so people actually enjoy using it.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- Scroll-Driven Chapters (Apple-style) -->
  <section id="story" class="chapters" aria-label="Scroll Story">
    <div class="chapters-sticky">
      <!-- Background & overlay: two layers for cross-fade -->
      <div class="chapters-stage">
        <div class="chapters-bg chapters-bgA is-active" aria-hidden="true" style="background-image:url('background-photos/black.jpeg')"></div>
        <div class="chapters-bg chapters-bgB" aria-hidden="true" style="background-image:url('background-photos/white.jpeg')"></div>
        <div class="chapters-overlay" aria-hidden="true"></div>
      </div>
      <!-- Centered changing copy -->
      <div class="chapters-center">
        <div class="chap-content" data-idx="1">
          <h2>Speed</h2>
          <p class="muted">Tight loops, fewer branches, and cache‑friendly data. Built to be fast on real machines.</p>
        </div>
        <div class="chap-content" data-idx="2">
          <h2>Elegance</h2>
          <p class="muted">Readable code, predictable behavior, and components that compose cleanly.</p>
        </div>
        <div class="chap-content" data-idx="3">
          <h2>Simplicity</h2>
          <p class="muted">Less surface area, more capability. Ship what matters and delete the rest.</p>
        </div>
      </div>
    </div>
    <!-- Scroll markers (drive chapter changes) -->
    <div class="chapter" data-idx="1"></div>
    <div class="chapter" data-idx="2"></div>
    <div class="chapter" data-idx="3"></div>
  </section>

  <!-- About -->
  <section id="about" class="section">
    <div class="container">
      <div class="about-grid card reveal">
        <div>
          <h2>About Me</h2>
          <p>I’m a first‑year Computer Science student at the University of Manchester. I like low‑level programming, algorithms, and building delightful interfaces. Outside class, I’m learning Rust and hacking on small tools.</p>
          <p><a href="personal-photos.html">See my personal photos →</a></p>
        </div>
        <div class="about-aside">
          <ul class="list">
            <li><strong>Languages:</strong> Python, C, JavaScript</li>
            <li><strong>Tools:</strong> Git, Linux, VS Code</li>
            <li><strong>Web:</strong> HTML, CSS, Node.js</li>
          </ul>
          <a class="btn small" href="#" download>Download CV (PDF)</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Projects -->
  <section id="projects" class="section">
    <div class="container">
      <h2 class="section-title">Projects</h2>
      <div class="projects-grid">
        <article class="project card reveal">
          <h3>RISC‑V Mini Assembler</h3>
          <p>Coursework for COMP12111. Parses a subset of RV32I and emits machine code. Includes symbol resolution and basic error reporting.</p>
          <div class="tags"><span>RISC‑V</span><span>C</span><span>Assembler</span></div>
        </article>
        <article class="project card reveal">
          <h3>CV Site</h3>
          <p>This website. Static site deployed on GitHub Pages with Cloudflare DNS and TLS. No frameworks, just HTML/CSS/JS.</p>
          <div class="tags"><span>HTML</span><span>CSS</span><span>Cloudflare</span></div>
        </article>
        <article class="project card reveal">
          <h3>Algo Visualizer</h3>
          <p>Small visualizer for sorting algorithms; emphasizes stability, swaps, and time complexity intuition.</p>
          <div class="tags"><span>JavaScript</span><span>Algorithms</span></div>
        </article>
      </div>
    </div>
  </section>

  <!-- Blog (placeholder) -->
  <section id="blog" class="section">
    <div class="container">
      <h2 class="section-title">Latest Posts</h2>
      <div class="blog-grid">
        <article class="card blog-card reveal">
          <h4>Measuring learning vs. feeling of learning</h4>
          <p>A short note on why active learning feels harder but works better.</p>
          <a href="#" class="more">Read →</a>
        </article>
        <article class="card blog-card reveal">
          <h4>From notes to a working RISC‑V loop</h4>
          <p>Building a tight branch‑minimal loop in assembly.</p>
          <a href="#" class="more">Read →</a>
        </article>
        <article class="card blog-card reveal">
          <h4>My starter dotfiles</h4>
          <p>Shell, Vim, and Git tweaks that actually help.</p>
          <a href="#" class="more">Read →</a>
        </article>
      </div>
    </div>
  </section>

  <!-- Newsletter -->
  <section class="section">
    <div class="container">
      <div class="newsletter card reveal">
        <h3>Subscribe for updates</h3>
        <form class="form-grid" onsubmit="event.preventDefault(); alert('Thanks! (stub)');">
          <input class="field" type="email" placeholder="Email address" required />
          <button class="btn" type="submit">Subscribe</button>
        </form>
        <p class="muted">No spam. Unsubscribe any time.</p>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="section">
    <div class="container">
      <div class="contact card reveal">
        <h2>Contact</h2>
        <form class="form-grid" onsubmit="event.preventDefault(); window.location='mailto:youremail@example.com';">
          <input class="field" type="text" name="name" placeholder="Your name" required />
          <input class="field" type="email" name="email" placeholder="Email" required />
          <textarea class="field" name="message" placeholder="Message" rows="4" required></textarea>
          <button class="btn" type="submit">Send</button>
        </form>
        <p class="muted">Prefer email? <a href="mailto:youremail@example.com">youremail@example.com</a></p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <p>© <span id="year"></span> Toto Wang · <a href="https://wmt615.com">wmt615.com</a></p>
    </div>
    <script>
      // Respect reduced motion
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      // Footer year
      document.getElementById('year').textContent = new Date().getFullYear();
  
      // Helpers
      const clamp = (v, min, max) => Math.min(max, Math.max(min, v));
      const lerp = (a, b, t) => a + (b - a) * t;
  
      // Reveal on scroll
      const revealEls = document.querySelectorAll('.reveal');
      const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){ e.target.classList.add('in-view'); }
        });
      }, { threshold: 0.15 });
      revealEls.forEach(el=>io.observe(el));
  
      if (!prefersReduced) {
        // Parallax hero
        const hero = document.querySelector('.hero.parallax');
        const heroImg = hero?.querySelector('.hero-media img');
        const heroCopy = hero?.querySelector('.hero-copy');
        const onScroll = () => {
          const y = window.scrollY || window.pageYOffset;
          const factor = clamp(y / 600, 0, 1);
          if (heroImg) {
            const ty = lerp(0, 40, factor);      // move image slower
            const sc = lerp(1, 1.06, factor);    // slight scale
            heroImg.style.transform = `translateY(${ty}px) scale(${sc})`;
          }
          if (heroCopy) {
            const ty2 = lerp(0, -22, factor);    // copy drifts up a bit
            heroCopy.style.transform = `translateY(${ty2}px)`;
            heroCopy.style.opacity = String(lerp(1, 0.92, factor));
          }
        };
        onScroll();
        window.addEventListener('scroll', onScroll, { passive: true });
  
        // Sticky showcase: scale & fade media as you scroll through section
        const showcase = document.querySelector('.scroll-section');
        const pin = showcase?.querySelector('.pin');
        const media = showcase?.querySelector('.showcase-media');
        const onScrollShowcase = () => {
          if (!showcase || !pin || !media) return;
          const rect = showcase.getBoundingClientRect();
          const winH = window.innerHeight || 1;
          // progress: 0 at section top enters viewport, 1 near the end
          const prog = clamp((winH - rect.top) / (rect.height - winH), 0, 1);
          const scale = lerp(1.0, 1.12, prog);
          const opacity = lerp(0.85, 1, prog);
          media.style.transform = `scale(${scale})`;
          media.style.opacity = opacity.toFixed(3);
        };
        onScrollShowcase();
        window.addEventListener('scroll', onScrollShowcase, { passive: true });
        window.addEventListener('resize', onScrollShowcase);
      }
    </script>
    <script>
      // Scroll-Driven Chapters with background cross-fade
      (function(){
        const root = document.querySelector('.chapters');
        if (!root) return;
        // default active
        root.dataset.active = root.dataset.active || '1';
        const markers = root.querySelectorAll('.chapter');
        const bgA = root.querySelector('.chapters-bgA');
        const bgB = root.querySelector('.chapters-bgB');
        let useA = true; // which layer is currently active

        // Map chapter index -> background image
        const BG = {
          '1': "background-photos/black.jpeg",
          '2': "background-photos/white.jpeg",
          '3': "background-photos/black.jpeg"
        };
        // Ensure initial images
        if (bgA && !bgA.style.backgroundImage) bgA.style.backgroundImage = `url('${BG['1']}')`;
        if (bgB && !bgB.style.backgroundImage) bgB.style.backgroundImage = `url('${BG['2']}')`;

        function setBackgroundFor(idx){
          const nextURL = BG[idx] || BG['1'];
          const active = useA ? bgA : bgB;
          const inactive = useA ? bgB : bgA;
          if (!active || !inactive) return;
          if (active.style.backgroundImage.includes(nextURL)) return; // already showing
          // Prepare inactive layer with next image
          inactive.style.backgroundImage = `url('${nextURL}')`;
          // Cross-fade: show inactive, hide active
          inactive.classList.add('is-active');
          active.classList.remove('is-active');
          useA = !useA;
        }

        const io = new IntersectionObserver((entries)=>{
          entries.forEach(e=>{
            if (e.isIntersecting) {
              const idx = e.target.getAttribute('data-idx');
              if (idx) {
                root.dataset.active = idx;
                setBackgroundFor(idx);
              }
            }
          });
        }, { root: null, threshold: 0.01, rootMargin: '-20% 0px -60% 0px' });
        markers.forEach(m=> io.observe(m));
      })();
    </script>
  </footer>
</body>
</html>
